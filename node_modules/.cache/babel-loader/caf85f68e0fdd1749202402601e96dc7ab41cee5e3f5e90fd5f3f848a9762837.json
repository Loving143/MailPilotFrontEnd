{"ast":null,"code":"import api from './api';\nexport const authService = {\n  // Send OTP to email\n  sendOtp: async email => {\n    const response = await api.post('/api/auth/send-otp', {\n      email\n    });\n    return response.data;\n  },\n  // Verify OTP and get JWT token\n  verifyOtp: async (email, otp) => {\n    const response = await api.post('/api/auth/verify-otp', {\n      email,\n      otp\n    });\n    return response.data;\n  },\n  // Send password reset link\n  forgotPassword: async email => {\n    const response = await api.post('/api/auth/forgot-password', null, {\n      params: {\n        email\n      }\n    });\n    return response.data;\n  },\n  // Reset password with token\n  resetPassword: async (token, newPassword) => {\n    const response = await api.post('/api/auth/reset-password', null, {\n      params: {\n        token,\n        newPassword\n      }\n    });\n    return response.data;\n  },\n  // Logout user\n  logout: async () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        await api.put('/api/user/logout', {}, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    }\n\n    // Clear local storage regardless of API call success\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  },\n  // Get current user info from token\n  getCurrentUser: () => {\n    const token = localStorage.getItem('token');\n    const user = localStorage.getItem('user');\n    if (token && user) {\n      try {\n        return JSON.parse(user);\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n        localStorage.removeItem('user');\n        return null;\n      }\n    }\n    return null;\n  },\n  // Check if user is authenticated\n  isAuthenticated: () => {\n    const token = localStorage.getItem('token');\n    return !!token;\n  },\n  // Store auth data\n  setAuthData: (token, userData = null) => {\n    localStorage.setItem('token', token);\n    if (userData) {\n      localStorage.setItem('user', JSON.stringify(userData));\n    }\n  },\n  // Clear auth data\n  clearAuthData: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n};","map":{"version":3,"names":["api","authService","sendOtp","email","response","post","data","verifyOtp","otp","forgotPassword","params","resetPassword","token","newPassword","logout","localStorage","getItem","put","headers","error","console","removeItem","getCurrentUser","user","JSON","parse","isAuthenticated","setAuthData","userData","setItem","stringify","clearAuthData"],"sources":["D:/Kiro/MailPilot_FrontEnd/src/services/authService.js"],"sourcesContent":["import api from './api';\r\n\r\nexport const authService = {\r\n  // Send OTP to email\r\n  sendOtp: async (email) => {\r\n    const response = await api.post('/api/auth/send-otp', { email });\r\n    return response.data;\r\n  },\r\n\r\n  // Verify OTP and get JWT token\r\n  verifyOtp: async (email, otp) => {\r\n    const response = await api.post('/api/auth/verify-otp', { email, otp });\r\n    return response.data;\r\n  },\r\n\r\n  // Send password reset link\r\n  forgotPassword: async (email) => {\r\n    const response = await api.post('/api/auth/forgot-password', null, {\r\n      params: { email }\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Reset password with token\r\n  resetPassword: async (token, newPassword) => {\r\n    const response = await api.post('/api/auth/reset-password', null, {\r\n      params: { token, newPassword }\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Logout user\r\n  logout: async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        await api.put('/api/user/logout', {}, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error('Logout error:', error);\r\n      }\r\n    }\r\n    \r\n    // Clear local storage regardless of API call success\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n  },\r\n\r\n  // Get current user info from token\r\n  getCurrentUser: () => {\r\n    const token = localStorage.getItem('token');\r\n    const user = localStorage.getItem('user');\r\n    \r\n    if (token && user) {\r\n      try {\r\n        return JSON.parse(user);\r\n      } catch (error) {\r\n        console.error('Error parsing user data:', error);\r\n        localStorage.removeItem('user');\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  // Check if user is authenticated\r\n  isAuthenticated: () => {\r\n    const token = localStorage.getItem('token');\r\n    return !!token;\r\n  },\r\n\r\n  // Store auth data\r\n  setAuthData: (token, userData = null) => {\r\n    localStorage.setItem('token', token);\r\n    if (userData) {\r\n      localStorage.setItem('user', JSON.stringify(userData));\r\n    }\r\n  },\r\n\r\n  // Clear auth data\r\n  clearAuthData: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}